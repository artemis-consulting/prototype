{% load url_tags %}
<div class="panel-group" role="tablist" aria-multiselectable="true">

    {% if enforcements|length == 0 %}
        <p class="text-info">No results found for: {{ q|replace_plus_signs }}</p>
    {% else %}
        <span>{{ enforcements_paginator.page_display }}</span>
             {% if enforcements_paginator.pages > 1 %}
            <nav>
               <ul class="pagination pagination-sm">
                   <li {% if enforcements_paginator.has_previous %}{% else %}class="disabled"{% endif %}><a href="?q={{q}}&amp;page={{enforcements_paginator.prev}}" class="prev">prev</a></li>

                   {% for page_number in enforcements_paginator.pagination_display %}

                   {% ifequal page_number "..." %}
                   <li><span>...</span></li>
                   {% else %}
                   {% ifequal page_number enforcements_paginator.page %}
                   <li class="disabled"><span>{{page_number}}</span></li>
                   {% else %}
                   <li><a href="?q={{q}}&amp;page={{page_number}}">{{page_number}}</a></li>
                   {% endifequal %}
                   {% endifequal %}
                   {% endfor %}

                   <li {% if enforcements_paginator.has_next %}{% else %}class="disabled"{% endif %}><a href="?q={{q}}&amp;page={{enforcements_paginator.next}}" class="next">next</a></li>
               </ul>
             </nav>
            {% endif %}

    {% endif %}

    {% for result in enforcements %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#{{ prefix }}_panel{{ forloop.counter }}" aria-expanded="false">
                        <i class="glyphicon glyphicon-menu-right"></i>
                        <i class="glyphicon glyphicon-menu-down" style="display:none;"></i>
                        Recall Number: {{ result.recall_number }} [{{ result.report_date }}: {{ result.city }}, {{ result.state }}]
                    </a>
                </h4>
            </div>
            <div class="panel-collapse collapse" id="{{ prefix }}_panel{{ forloop.counter }}">
                <div class="panel-body">
                    <table class="table table-striped table-bordered">
                        <caption class="sr-only"> Recall Number: {{ result.recall_number }}</caption>
                        <tbody>
                        {% for key, value in result.items %}
                            <tr>
                                <th scope="row">{{ key|replace_underscores|capfirst }}
                                </th>
                                <td class="cell">
                                    <div class="text">
                                        {% if value|is_list %}
                                            {% for val in value %}
                                                {{ val|default:"N/A" }}<br />
                                            {% endfor %}
                                        {% else %}
                                            {{ value|default:"N/A" }}
                                        {% endif %}
                                    </div>
                                    <span class="more">More...</span>
                                    <span class="less" style="display:none;">Less...</span>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
